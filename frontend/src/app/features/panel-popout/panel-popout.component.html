<div class="panel-popout-container">
  <!-- Header -->
  <div class="popout-header">
    <h2>{{ getPanelTitle() }}</h2>
  </div>


  <!-- Panel Content - Render based on type -->
  <div class="popout-content">
    @switch (panelType) {
      <!-- Query Control -->
      @case ('query-control') {
        <app-query-control
          [domainConfig]="domainConfig"
          (urlParamsChange)="onUrlParamsChange($event)"
          (clearAllFilters)="onClearAllFilters()">
        </app-query-control>
      }
      <!-- Picker (Manufacturer-Model Picker) -->
      @case ('picker') {
        <app-base-picker
          [configId]="getPickerConfigId()"
          (selectionChange)="onPickerSelectionChange($event)">
        </app-base-picker>
      }
      <!-- Statistics Panel -->
      @case ('statistics') {
        <app-statistics-panel
          [domainConfig]="domainConfig">
        </app-statistics-panel>
      }
      <!-- Results Table -->
      @case ('results') {
        <app-results-table
          [domainConfig]="domainConfig">
        </app-results-table>
      }
      <!-- Query Panel (filters only) -->
      @case ('query-panel') {
        <app-query-panel
          [domainConfig]="domainConfig"
          (urlParamsChange)="onUrlParamsChange($event)"
          (clearAllFilters)="onClearAllFilters()">
        </app-query-panel>
      }
      <!-- Basic Results Table (table only, no embedded filters) -->
      @case ('basic-results') {
        <app-basic-results-table
          [domainConfig]="domainConfig"
          (urlParamsChange)="onUrlParamsChange($event)">
        </app-basic-results-table>
      }
      <!-- Unknown panel type -->
      @default {
        <div class="unknown-panel">
          <p>Unknown panel type: {{ panelType }}</p>
          <p>Panel ID: {{ panelId }}</p>
        </div>
      }
    }
  </div>
</div>
